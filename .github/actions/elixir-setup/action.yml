name: Setup Elixir
inputs:
  elixir-version:
    required: true
    type: string
  otp-version:
    required: true
    type: string
runs:
  using: "composite"
  steps:
    - name: Setup elixir
      uses: erlef/setup-beam@v1
      with:
        elixir-version: ${{ inputs.elixir-version }}
        otp-version: ${{ inputs.otp-version }}

    - name: Get deps cache
      uses: actions/cache/restore@v4
      with:
        path: deps/
        key: deps-${{ runner.os }}-${{ hashFiles('**/mix.lock') }}

    - name: Install Dependencies
      run: |
        mix deps.get
        mix deps.compile
      shell: sh

    - name: Save deps cache
      uses: actions/cache/save@v4
      with:
        path: deps/
        key: deps-${{ runner.os }}-${{ hashFiles('**/mix.lock') }}
